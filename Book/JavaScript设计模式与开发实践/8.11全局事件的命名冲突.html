<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    let Event = (function () {
      let global = this,
        event,
        _default = 'default';

      event = function () {
        let _listen,
          _trigger,
          _remove,
          _slice = Array.prototype.slice,
          _shift = Array.prototype.shift,
          _unshift = Array.prototype.unshift,
          namespaceCache = {},
          _create,
          each = function (ary, fn) {
            let ret;
            for (let i = 0; i < ary.length; i++) {
              let n = ary[i];
              ret = fn.call(n, i, n)
            }
            return ret;
          }
      }

      _listen = function (key, fn, cache) {
        if (!cache[key]) {
          cache[key] = []
        }
        cache[key].push(fn)
      }
      // 避免冲突有些复杂 先放放。。。待完善
      _remove = function (key, cache, fn) {
        if (cache[key]) {
          if (fn) {
            for (let i = cache[key].length - 1; i >= 0; i--) {
              if (cache[key] === fn) {
                cache[key].splice(i, 1)
              }
            }
          } else {
            cache[key] = []
          }
        }
      }
    })()
  </script>
</body>

</html>