<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    // 发布订阅模式又叫观察者模式，它定义对象间的一种一对多的依赖关系，当一个对象的状态发生变化时
    // 所有依赖于它的对象都将得到通知

    let salesOffices = {};

    salesOffices.clientList = [];

    salesOffices.listen = function (fn) { // 增加订阅者
      this.clientList.push(fn)
    }

    salesOffices.trigger = function () {
      for (let i = 0; i < this.clientList.length; i++) {
        let fn = this.clientList[i];
        fn.apply(this, arguments)
      }
    }

    salesOffices.listen(function (price, squareMeter) {
      console.log("价格" + price);
      console.log("squareMeter" + squareMeter);
    })

    // salesOffices.listen(function (price, squareMeter) {
    //   console.log("价格" + price);
    //   console.log("squareMeter" + squareMeter);
    // })

    salesOffices.trigger(2000000, 88);
    salesOffices.trigger(3000000, 110);
  </script>
</body>

</html>